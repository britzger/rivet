#include "Rivet/Rivet.hh"

namespace Rivet {

  const string getInstalledDataPath() {
    const string prefix = "@prefix@";
    string datadir = "@datadir@/@PACKAGE_TARNAME@";
    datadir.replace(datadir.begin(), datadir.begin()+9, prefix);
    if (datadir.find("${") != string::npos) {
      string msg = "Shell characters remaining in data install path: ";
      msg += datadir;
      throw runtime_error(msg);
    }
    return datadir;
  }


  const string getInstalledLibPath() {
    const string prefix = "@prefix@";
    string execprefix = "@exec_prefix@";
    if (execprefix.find("${prefix}") == 0) {
      execprefix.replace(execprefix.begin(), execprefix.begin()+9, prefix);
    }
    string libdir = "@libdir@";
    if (libdir.find("${prefix}") == 0) {
      libdir.replace(libdir.begin(), libdir.begin()+9, prefix);
    } else if (libdir.find("${exec_prefix}") == 0) {
      libdir.replace(libdir.begin(), libdir.begin()+14, execprefix);
    }

    if (libdir.find("${") != string::npos) {
      string msg = "Shell characters remaining in library install path: ";
      msg += libdir;
      throw runtime_error(msg);
    }
    return libdir;
  }

}
